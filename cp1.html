<!DOCTYPE html>
<html>
<head>
  <title>Smart Tourist Safety Prototype</title>
    <link rel="stylesheet" href="cp1.css"/>

  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    body { font-family: Arial; padding: 20px; }
    #map { height: 300px; margin-top: 20px; }
    .section { margin-bottom: 20px; }
  </style>
</head>
<body>
  <h1>Smart Tourist Safety Prototype</h1>

  <!-- 1. Tourist Registration -->
  <div class="section">
    <h2>1. Tourist Registration</h2>
    Name: <input type="text" id="name"><br>
    Age: <input type="number" id="age"><br>
    Contact: <input type="text" id="contact"><br>
    <button onclick="registerTourist()">Register & Generate QR</button>
    <div id="qrcode"></div>
  </div>

  <!-- 2. Map & Geo-fencing -->
  <div class="section">
    <h2>2. Map & Geo-fencing</h2>
    <div id="map"></div>
    <button onclick="simulateLocation()">Simulate Tourist Location</button>
  </div>

  <!-- 3. Crowd Alert -->
  <div class="section">
    <h2>3. Crowd Alert</h2>
    Enter number of people at location: <input type="number" id="crowdCount">
    <button onclick="checkCrowd()">Check</button>
  </div>

  <!-- 4. Incident Reporting -->
  <div class="section">
    <h2>4. Incident Reporting</h2>
    <button onclick="reportIncident()">Report Help</button>
  </div>

  <!-- Scripts -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

  <script>
  // 1. Tourist Registration
  function registerTourist() {
    var name = document.getElementById("name").value;
    var age = document.getElementById("age").value;
    var contact = document.getElementById("contact").value;
    var data = `Name: ${name}, Age: ${age}, Contact: ${contact}`;
    document.getElementById("qrcode").innerHTML = "";
    new QRCode(document.getElementById("qrcode"), data);
    alert("Tourist Registered!");
  }

  // 2. Map & Geo-fencing
  var map = L.map('map').setView([25.0, 82.5], 15);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
  var restrictedZone = L.circle([25.002, 82.502], {radius: 100, color:'red'}).addTo(map);

  function simulateLocation() {
    var touristLat = 25.001 + Math.random()*0.005;
    var touristLng = 82.501 + Math.random()*0.005;
    L.marker([touristLat, touristLng]).addTo(map).bindPopup("Tourist Location").openPopup();
    var distance = map.distance([touristLat, touristLng], restrictedZone.getLatLng());
    if(distance < restrictedZone.getRadius()) alert("ALERT: Entered Restricted Zone!");
    else alert("Tourist in Safe Zone");
  }

  // 3. Crowd Alert
  function checkCrowd() {
      var count = parseInt(document.getElementById("crowdCount").value);
      if (isNaN(count)) {
          alert("Please enter a valid number");
          return;
      }
      if(count > 50) alert("ALERT: High Crowd Density!");
      else alert("Crowd Safe");
  }

  // 4. Incident Reporting
  function reportIncident() {
      alert("Incident reported! Authorities will be notified.");
  }
  </script>
<script src="cp1.js"></script>
</body>
</html>
